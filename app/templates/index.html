<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather Dashboard</title>
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
    <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>

<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">
                <i class="fas fa-cloud-sun"></i> Weather Dashboard
            </div>
            <!-- 
            <button class="mobile-menu-btn">
                <i class="fas fa-bars"></i>
            </button>
            <ul class="nav-menu">
                <li><a href="{{ url_for('index') }}"><i class="fas fa-home"></i> Home</a></li>
                <li><a href="{{ url_for('impressum') }}"><i class="fas fa-info-circle"></i> Impressum</a></li>
                <li><a href="{{ url_for('datenschutz') }}"><i class="fas fa-shield-alt"></i> Datenschutz</a></li>
            </ul>
            -->
        </div>
    </nav>

    <!-- Main Container -->
    <div class="container">
        <!-- Hero Section -->
        <div class="hero">
            <h1>Weather Dashboard</h1>
            {% if is_multi_location %}
                <p class="location">
                    <i class="fas fa-map-marker-alt"></i> Multiple Locations
                </p>
            {% endif %}
        </div>

        <!-- Locations Grid -->
        <div class="locations-grid">
            {% for loc in locations %}
            <div class="location-card glass-card">
                <div class="location-header">
                    <div class="location-title">
                        <i class="fas fa-map-marker-alt"></i>
                        <span>{{ loc.name }}</span>
                    </div>
                    <div class="location-updated">
                        <i class="fas fa-clock"></i>
                        <span>{{ loc.weather.current.time }}</span>
                    </div>
                </div>

                <!-- Current Weather Compact -->
                <div class="location-current">
                    <div class="location-current-main">
                        <img src="http://openweathermap.org/img/wn/{{ loc.weather.current.icon }}@2x.png"
                             alt="{{ loc.weather.current.weather }}"
                             class="weather-icon-large">
                        <div class="temp-info">
                            <div class="main-temp">{{ loc.weather.current.temp }}°</div>
                            <div class="feels-like">
                                Feels like {{ loc.weather.current.feels_like }}°
                            </div>
                            <div class="condition">{{ loc.weather.current.weather }}</div>
                        </div>
                    </div>
                    <div class="location-current-stats">
                        <div class="stat-card">
                            <div class="stat-header">
                                <div class="stat-icon">
                                    <i class="fas fa-tint"></i>
                                </div>
                                <span class="stat-label">Humidity</span>
                            </div>
                            <div class="stat-value">{{ loc.weather.current.humidity }}%</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-header">
                                <div class="stat-icon">
                                    <i class="fas fa-wind"></i>
                                </div>
                                <span class="stat-label">Wind</span>
                            </div>
                            <div class="stat-value">{{ loc.weather.current.wind_speed }} m/s</div>
                        </div>
                    </div>
                </div>

                <!-- 10-Day Forecast -->
                <div class="daily-forecast-section">
                    <div class="section-header">
                        <i class="fas fa-calendar-alt"></i>
                        <h2>10-Day Forecast</h2>
                    </div>
                    <div class="daily-forecast-grid">
                        {% for day in loc.weather.daily %}
                        <div class="daily-card">
                            <div class="daily-date">{{ day.date }}</div>
                            <img src="http://openweathermap.org/img/wn/{{ day.icon }}.png"
                                 alt="{{ day.weather }}"
                                 class="daily-icon">
                            <div class="daily-temps">
                                <span class="daily-max">{{ day.temp_max }}°</span>
                                <span class="daily-min">{{ day.temp_min }}°</span>
                            </div>
                            <div class="daily-condition">{{ day.weather }}</div>
                            {% if day.pop > 0 %}
                            <div class="daily-pop">
                                <i class="fas fa-umbrella"></i> {{ day.pop }}%
                            </div>
                            {% endif %}
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>

        <!-- Weather Widgets (global) -->
        <div class="widgets-section">
            <div class="widgets-grid">
                <div class="widget-card">
                    <h2>
                        <i class="fas fa-radar" style="color: var(--primary);"></i>
                        Live Weather Radar
                    </h2>
                    <iframe 
                        src="{{ iframe_url }}"
                        width="100%" 
                        height="400" 
                        frameborder="0" 
                        style="border:0;border-radius:16px;" 
                        allowfullscreen
                        title="Live Weather Radar">
                    </iframe>
                </div>

                <div class="widget-card">
                    <h2>
                        <i class="fas fa-video" style="color: var(--secondary);"></i>
                        Live Webcam
                    </h2>
                    <div class="webcam-embed">
                        <a 
                            name="windy-webcam-timelapse-player" 
                            data-id="{{ webcam_id }}" 
                            data-play="day" 
                            data-loop="0" 
                            data-auto-play="0"
                            data-force-full-screen-on-overlay-play="0"
                            data-interactive="1" 
                            href="https://windy.com/webcams/1190793231"
                            target="_blank"
                            style="color: var(--text-primary);">
                            Webcam in der Bayreuther Fußgängerzone
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://webcams.windy.com/webcams/public/embed/v2/script/player.js"></script>
</body>
</html>